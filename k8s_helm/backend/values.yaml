backend:
  name: backend-deployment
  namespace: meo-stationery

workload:
  image: minhtri1612/meo-stationery-backend:vcl
  resources:
    requests:
      memory: "256Mi"
      cpu: "128m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  ports:
    - containerPort: 3000

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

serviceAccount:
  create: false

replicaCount: 2

# Configuration for the application
config:
  nextAuthUrl: "http://meo-stationery.local"

# Values for the database (used when existingSecret not set)
database:
  fullnameOverride: "postgres"
  namespace: "database"
  auth:
    username: "meo_admin"
    database: "meo_stationery"
    password: ""   # Only used when existingSecret.name is empty; prefer AWS Secrets Manager + External Secrets

# When set, chart does not create Secret; deployment/migration use this K8s Secret (synced from AWS Secrets Manager by External Secrets Operator).
existingSecret:
  name: ""   # e.g. "meo-stationery-backend-secrets" when using External Secrets

secret:
  # nextAuthSecret: only used when existingSecret.name is empty; otherwise use External Secrets
  nextAuthSecret: ""

httpRoute:
  enabled: false

ingress:
  enabled: true
  host: meo-stationery.local
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  tls:
    enabled: false
    secretName: meo-stationery-tls

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
